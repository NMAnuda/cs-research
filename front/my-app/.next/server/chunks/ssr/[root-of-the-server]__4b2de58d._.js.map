{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 111, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/anuda/Desktop/CS%20research%20web/cs-research/front/my-app/src/app/%28policeman%29/check/page.js"],"sourcesContent":["'use client';\r\n\r\nimport { useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nexport default function CheckVehicle() {\r\n  const [vehicleNumber, setVehicleNumber] = useState('');\r\n  const [issueType, setIssueType] = useState('');\r\n  const [punishmentSheet, setPunishmentSheet] = useState(null);\r\n  const [city, setCity] = useState(localStorage.getItem('loggedInCity') || 'Not provided');\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState('');\r\n\r\n  const issueOptions = [\r\n    'No Issues',\r\n    'Driving License',\r\n    'Revenue License',\r\n    'Insurance Certificate',\r\n    'Vehicle Registration Certificate',\r\n    'Emission Test Certificate',\r\n  ];\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setError('');\r\n    setSuccess('');\r\n\r\n    const formData = new FormData();\r\n    formData.append('vehicleNumber', vehicleNumber);\r\n    formData.append('issueType', issueType);\r\n    if (punishmentSheet && issueType !== 'No Issues') {\r\n      formData.append('punishmentSheet', punishmentSheet);\r\n    }\r\n\r\n    try {\r\n      const response = await axios.post('http://localhost:3080/submit-vehicle-check', formData, {\r\n        headers: {\r\n          'Content-Type': 'multipart/form-data',\r\n          'x-city': localStorage.getItem('loggedInCity') || 'Not provided',\r\n          'x-policeman-id': localStorage.getItem('loggedInPolicemanId') || 'unknown', // Add policeman ID\r\n        },\r\n      });\r\n      setSuccess(response.data.message);\r\n      setVehicleNumber('');\r\n      setIssueType('');\r\n      setPunishmentSheet(null);\r\n    } catch (err) {\r\n      console.error('Submission error:', err.response?.data || err.message);\r\n      setError(err.response?.data?.error || 'Failed to submit vehicle check');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center bg-white\">\r\n      <div className=\"bg-white p-6 rounded-lg shadow-lg w-full max-w-md border border-gray-200\">\r\n        <h1 className=\"text-2xl font-bold mb-6 text-center text-gray-600\">Check Vehicle</h1>\r\n        {error && <p className=\"text-red-500 mb-4 text-center\">{error}</p>}\r\n        {success && <p className=\"text-green-500 mb-4 text-center\">{success}</p>}\r\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n          <div>\r\n            <label htmlFor=\"vehicleNumber\" className=\"block text-sm font-medium text-gray-700\">\r\n              Vehicle Number\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"vehicleNumber\"\r\n              value={vehicleNumber}\r\n              onChange={(e) => setVehicleNumber(e.target.value)}\r\n              className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md bg-blue-50 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500\"\r\n              required\r\n            />\r\n          </div>\r\n          <div>\r\n            <label htmlFor=\"issueType\" className=\"block text-sm font-medium text-gray-700\">\r\n              Issue Type\r\n            </label>\r\n            <select\r\n              id=\"issueType\"\r\n              value={issueType}\r\n              onChange={(e) => setIssueType(e.target.value)}\r\n              className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md bg-white focus:outline-none focus:ring-indigo-500 focus:border-indigo-500\"\r\n              required\r\n            >\r\n              <option value=\"\" disabled>Select an issue</option>\r\n              {issueOptions.map((option) => (\r\n                <option key={option} value={option}>\r\n                  {option}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n          {issueType && issueType !== 'No Issues' && (\r\n            <div>\r\n              <label htmlFor=\"punishmentSheet\" className=\"block text-sm font-medium text-gray-700\">\r\n                Punishment Sheet\r\n              </label>\r\n              <input\r\n                type=\"file\"\r\n                id=\"punishmentSheet\"\r\n                accept=\"application/pdf,image/*\"\r\n                onChange={(e) => setPunishmentSheet(e.target.files[0])}\r\n                className=\"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100\"\r\n              />\r\n              {punishmentSheet && <p className=\"text-sm text-gray-600 mt-1\">Selected: {punishmentSheet.name}</p>}\r\n            </div>\r\n          )}\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700\">City</label>\r\n            <input\r\n              type=\"text\"\r\n              value={city}\r\n              readOnly\r\n              className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100\"\r\n            />\r\n          </div>\r\n          <button\r\n            type=\"submit\"\r\n            disabled={loading}\r\n            className={`w-full py-2 px-4 rounded-md text-white ${\r\n              loading ? 'bg-gray-400 cursor-not-allowed' : 'bg-purple-600 hover:bg-purple-700'\r\n            } focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500`}\r\n          >\r\n            {loading ? 'Checking...' : 'Check Vehicle'}\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}