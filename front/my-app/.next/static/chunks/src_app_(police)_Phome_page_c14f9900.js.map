{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/anuda/Desktop/CS%20research%20web/cs-research/front/my-app/src/app/%28police%29/Phome/page.js"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\nexport default function Dashboard() {\r\n  const [checkpoints, setCheckpoints] = useState([]);\r\n  const [attendanceData, setAttendanceData] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  const fetchCheckpoints = async () => {\r\n    try {\r\n      const response = await axios.get('http://localhost:3080/checkpoints');\r\n      setCheckpoints(response.data);\r\n    } catch (error) {\r\n      console.error('Error fetching checkpoints:', error);\r\n      setError('Failed to fetch checkpoint data');\r\n    }\r\n  };\r\n\r\n  const fetchAttendanceData = async () => {\r\n    try {\r\n      const today = new Date();\r\n      today.setHours(0, 0, 0, 0);\r\n      const tomorrow = new Date(today);\r\n      tomorrow.setDate(today.getDate() + 1);\r\n\r\n      const pdetailsResponse = await axios.get('http://localhost:3080/attendance-records');\r\n      const pdetails = pdetailsResponse.data;\r\n\r\n      const attenResponse = await axios.get('http://localhost:3080/attendance-today', {\r\n        params: {\r\n          start: today.toISOString(),\r\n          end: tomorrow.toISOString(),\r\n        },\r\n      });\r\n      const attenRecords = attenResponse.data;\r\n\r\n      const presentPolicemen = attenRecords\r\n        .filter(record => record.Attendace)\r\n        .map(record => {\r\n          const pdetail = pdetails.find(p => p.ID === record.ID);\r\n          return {\r\n            ...record,\r\n            name: pdetail ? pdetail.name : 'Unknown',\r\n          };\r\n        });\r\n\r\n      setAttendanceData(presentPolicemen);\r\n    } catch (error) {\r\n      console.error('Error fetching attendance data:', error);\r\n      setError('Failed to fetch attendance data');\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      setLoading(true);\r\n      await Promise.all([fetchCheckpoints(), fetchAttendanceData()]);\r\n      setLoading(false);\r\n    };\r\n    fetchData();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"h-full bg-white flex p-4 gap-4\">\r\n      {/* Left Section: Today */}\r\n      <div className=\"w-2/3 bg-white border border-black rounded-md p-4 overflow-y-auto\">\r\n        <h2 className=\"text-lg font-semibold mb-2 text-black\">Today</h2>\r\n        <div className=\"h-96\">\r\n          {loading ? (\r\n            <p className=\"text-black\">Loading...</p>\r\n          ) : error ? (\r\n            <p className=\"text-red-500\">{error}</p>\r\n          ) : checkpoints.length > 0 ? (\r\n            checkpoints.map((checkpoint, index) => (\r\n              <div key={index} className=\"mb-2 p-2 border-b border-black\">\r\n                <p className=\"text-black\"><strong>Vehicle:</strong> {checkpoint.vehicleNumber}</p>\r\n                <p className=\"text-black\"><strong>City:</strong> {checkpoint.city}</p>\r\n                <p className=\"text-black\"><strong>Time:</strong> {new Date(checkpoint.createdAt).toLocaleTimeString()}</p>\r\n                <p className=\"text-black\"><strong>Status:</strong> {checkpoint.actionTaken || 'Pending'}</p>\r\n              </div>\r\n            ))\r\n          ) : (\r\n            <p className=\"text-black\">No checkpoints submitted today</p>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Right Section: Today Past actions and Trakings */}\r\n      <div className=\"w-1/3 flex flex-col gap-4\">\r\n        {/* Today Past actions */}\r\n        <div className=\"bg-white border border-black rounded-md p-4 overflow-y-auto\">\r\n          <h2 className=\"text-lg font-semibold mb-2 text-black\">Today Past actions</h2>\r\n          <div className=\"h-48\">\r\n            {loading ? (\r\n              <p className=\"text-black\">Loading...</p>\r\n            ) : checkpoints.length > 0 ? (\r\n              checkpoints\r\n                .filter(checkpoint => checkpoint.actionTaken === 'Action Taken')\r\n                .map((checkpoint, index) => (\r\n                  <p key={index} className=\"mb-1 text-black\">\r\n                    {checkpoint.vehicleNumber} - {checkpoint.city}\r\n                  </p>\r\n                ))\r\n            ) : (\r\n              <p className=\"text-black\">No past actions today</p>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Trakings */}\r\n        <div className=\"bg-white border border-black rounded-md p-4 overflow-y-auto\">\r\n          <h2 className=\"text-lg font-semibold mb-2 text-black\">Trakings</h2>\r\n          <div className=\"h-48\">\r\n            {loading ? (\r\n              <p className=\"text-black\">Loading...</p>\r\n            ) : attendanceData.length > 0 ? (\r\n              attendanceData.map((record, index) => (\r\n                <p key={index} className=\"mb-1 text-black\">\r\n                  {record.name} - {record.city}\r\n                </p>\r\n              ))\r\n            ) : (\r\n              <p className=\"text-black\">No policemen marked present today</p>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}