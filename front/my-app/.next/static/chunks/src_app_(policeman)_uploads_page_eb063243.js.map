{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/anuda/Desktop/CS%20research%20web/cs-research/front/my-app/src/app/%28policeman%29/uploads/page.js"],"sourcesContent":["'use client';\r\n\r\nimport { useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nexport default function Checkpoint() {\r\n  const [vehicleNumber, setVehicleNumber] = useState('');\r\n  const [violationType, setViolationType] = useState('');\r\n  const [photo, setPhoto] = useState(null);\r\n  const [city, setCity] = useState(localStorage.getItem('loggedInCity') || 'Not provided');\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState('');\r\n\r\n  const violationOptions = [\r\n    'Cross Road Line',\r\n    'High Speed',\r\n    'No Parking',\r\n    'Red Light Violation',\r\n  ];\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setError('');\r\n    setSuccess('');\r\n\r\n    const formData = new FormData();\r\n    formData.append('vehicleNumber', vehicleNumber);\r\n    formData.append('violationType', violationType);\r\n    if (photo) formData.append('photo', photo);\r\n    console.log('FormData contents:', {\r\n      vehicleNumber,\r\n      violationType,\r\n      photo: photo ? photo.name : null,\r\n      city: localStorage.getItem('loggedInCity'),\r\n    });\r\n\r\n    try {\r\n      const response = await axios.post('http://localhost:3080/submit-violation', formData, {\r\n        headers: {\r\n          'Content-Type': 'multipart/form-data',\r\n          'x-city': localStorage.getItem('loggedInCity') || 'Not provided',\r\n          'x-policeman-id': localStorage.getItem('loggedInPolicemanId') || 'unknown', // Add policeman ID\r\n        },\r\n      });\r\n      setSuccess(response.data.message);\r\n      setVehicleNumber('');\r\n      setViolationType('');\r\n      setPhoto(null);\r\n    } catch (err) {\r\n      console.error('Submission error:', err.response?.data || err.message);\r\n      setError(err.response?.data?.error || 'Failed to submit violation');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center bg-white\">\r\n      <div className=\"bg-white p-6 rounded-lg shadow-lg w-full max-w-md border border-gray-200\">\r\n        <h1 className=\"text-2xl font-bold mb-6 text-center text-gray-600\">Submit Traffic Violation</h1>\r\n        {error && <p className=\"text-red-500 mb-4 text-center\">{error}</p>}\r\n        {success && <p className=\"text-green-500 mb-4 text-center\">{success}</p>}\r\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n          <div>\r\n            <label htmlFor=\"vehicleNumber\" className=\"block text-sm font-medium text-gray-700\">\r\n              Vehicle Number\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"vehicleNumber\"\r\n              value={vehicleNumber}\r\n              onChange={(e) => setVehicleNumber(e.target.value)}\r\n              className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md bg-blue-50 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500\"\r\n              required\r\n            />\r\n          </div>\r\n          <div>\r\n            <label htmlFor=\"violationType\" className=\"block text-sm font-medium text-gray-700\">\r\n              Violation Type\r\n            </label>\r\n            <select\r\n              id=\"violationType\"\r\n              value={violationType}\r\n              onChange={(e) => setViolationType(e.target.value)}\r\n              className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md bg-white focus:outline-none focus:ring-indigo-500 focus:border-indigo-500\"\r\n              required\r\n            >\r\n              <option value=\"\" disabled>Select a violation</option>\r\n              {violationOptions.map((option) => (\r\n                <option key={option} value={option}>\r\n                  {option}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n          <div>\r\n            <label htmlFor=\"photo\" className=\"block text-sm font-medium text-gray-700\">\r\n              Photo Evidence\r\n            </label>\r\n            <input\r\n              type=\"file\"\r\n              id=\"photo\"\r\n              accept=\"image/*\"\r\n              onChange={(e) => setPhoto(e.target.files[0])}\r\n              className=\"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100\"\r\n            />\r\n            {photo && <p className=\"text-sm text-gray-600 mt-1\">Selected: {photo.name}</p>}\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700\">City</label>\r\n            <input\r\n              type=\"text\"\r\n              value={city}\r\n              readOnly\r\n              className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100\"\r\n            />\r\n          </div>\r\n          <button\r\n            type=\"submit\"\r\n            disabled={loading}\r\n            className={`w-full py-2 px-4 rounded-md text-white ${\r\n              loading ? 'bg-gray-400 cursor-not-allowed' : 'bg-purple-600 hover:bg-purple-700'\r\n            } focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500`}\r\n          >\r\n            {loading ? 'Submitting...' : 'Submit Violation'}\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}